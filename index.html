<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cityline Bank Ops</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="topbar-brand">
        <h1>Cityline Bank 시스템</h1>
        <p>실전형 은행 운영 시뮬레이터</p>
      </div>
      <div id="fxTicker" class="fx-ticker">
        <div class="fx-ticker-row">
          <span id="fxRate" class="fx-rate">환율 정보를 불러오는 중...</span>
          <button id="fxRefreshBtn" class="ghost-btn fx-refresh-btn" type="button" title="마지막 갱신: 없음">
            <span class="fx-refresh-icon" aria-hidden="true">↻</span>
            <span class="fx-refresh-label">새로고침</span>
          </button>
        </div>
        <span id="fxUpdated" class="fx-updated"></span>
      </div>
      <p id="sessionInfo" class="hint">로그인 필요</p>
      <button id="logoutBtn" class="ghost-btn" disabled>로그아웃</button>
    </header>

    <main class="main-shell">
      <section id="loginSection" class="card auth">
        <h2>시스템 로그인</h2>
        <p>은행 고객/관리자 전용 테스트 계정으로 시작해보세요.</p>
        <div class="grid-2">
          <div>
            <label for="accountInput">계좌번호 또는 관리자 ID</label>
            <input id="accountInput" type="text" placeholder="고객: 1000001, 관리자: ADMIN" />
          </div>
          <div>
            <label for="pinInput">PIN</label>
            <input id="pinInput" type="password" placeholder="숫자 4자리" maxlength="8" />
          </div>
        </div>
        <label for="roleSelect">역할</label>
        <select id="roleSelect">
          <option value="customer">고객</option>
          <option value="admin">관리자</option>
        </select>
        <button id="loginBtn" class="btn-primary">로그인</button>
        <p class="hint">초기 관리자 계정: ID <strong>ADMIN</strong> / PIN <strong>0000</strong></p>
      </section>

       <section id="profileSection" class="card hidden">
        <h2>내 정보 수정</h2>
        <p id="profileAccount" class="hint">로그인 후 이용 가능합니다.</p>
        <label for="profileName">예금주명</label>
        <input id="profileName" type="text" placeholder="이름" />
        <label for="profileEmail">이메일</label>
        <input id="profileEmail" type="email" placeholder="user@cityline.co.kr" />
        <label for="profilePostcode">우편번호</label>
        <div class="address-row">
          <div>
            <input id="profilePostcode" type="text" placeholder="우편번호" maxlength="10" />
          </div>
          <button id="profileAddressSearchBtn" type="button" class="ghost-btn">주소 검색</button>
        </div>
        <label for="profileAddress">주소</label>
        <input id="profileAddress" type="text" placeholder="주소" />
        <label for="profileCurrentPin">현재 PIN</label>
        <input id="profileCurrentPin" type="password" placeholder="변경/수정 확인용 PIN" />
        <label for="profileNewPin">새 PIN(선택)</label>
        <input id="profileNewPin" type="password" placeholder="숫자 4~8자리" maxlength="8" />
        <button id="updateProfileBtn" class="btn-primary">내 정보 수정</button>
      </section>

      <section id="customerSection" class="hidden">
        <section class="card">
          <h2>고객 포털</h2>
          <div class="stats">
            <article class="metric">
              <span>예금주</span>
              <strong id="custName">-</strong>
            </article>
            <article class="metric">
              <span>계좌번호</span>
              <strong id="custNo">-</strong>
            </article>
            <article class="metric">
              <span>현재 잔액</span>
              <strong id="custBalance">-</strong>
            </article>
            <article class="metric">
              <span>상태</span>
              <strong id="custStatus">-</strong>
            </article>
          </div>
        </section>

        <section class="grid-3">
          <article class="card">
            <h3>입금</h3>
            <label for="depositAmount">금액</label>
            <input id="depositAmount" type="number" min="1" step="1" placeholder="금액 입력" />
            <label for="depositMemo">메모</label>
            <input id="depositMemo" type="text" placeholder="예: 급여 입금" />
            <button id="depositBtn" class="btn-primary">입금 실행</button>
          </article>
          <article class="card">
            <h3>출금</h3>
            <label for="withdrawAmount">금액</label>
            <input id="withdrawAmount" type="number" min="1" step="1" placeholder="금액 입력" />
            <label for="withdrawMemo">메모</label>
            <input id="withdrawMemo" type="text" placeholder="예: 카드 결제" />
            <button id="withdrawBtn" class="btn-primary">출금 실행</button>
          </article>
          <article class="card">
            <h3>이체</h3>
            <label for="transferTo">수취인 계좌</label>
            <input id="transferTo" type="text" placeholder="수신 계좌번호" />
            <label for="transferAmount">금액</label>
            <input id="transferAmount" type="number" min="1" step="1" placeholder="금액 입력" />
            <p id="transferThresholdHint" class="hint">대용량 이체는 관리자 승인 대상입니다.</p>
            <button id="transferBtn" class="btn-primary">이체 실행</button>
          </article>
        </section>

        <section class="card">
          <h3>거래 내역</h3>
          <div id="customerLedger" class="ledger"></div>
        </section>
        <section class="card">
          <h3>승인 대기 이체</h3>
          <div id="customerPendingApprovals" class="ledger"></div>
        </section>
      </section>

      <section id="adminSection" class="hidden">
        <section class="card">
          <h2>관리자 콘솔</h2>
          <div class="stats">
            <article class="metric">
              <span>총 계좌 수</span>
              <strong id="adminTotalAccounts">0</strong>
            </article>
            <article class="metric">
              <span>총 예치금</span>
              <strong id="adminTotalAssets">0</strong>
            </article>
            <article class="metric">
              <span>거래 건수</span>
              <strong id="adminTxnCount">0</strong>
            </article>
            <article class="metric">
              <span>잠금 계좌</span>
              <strong id="adminFrozenCount">0</strong>
            </article>
          </div>
        </section>

        <section class="grid-2">
          <article class="card">
            <h3>새 계좌 생성</h3>
            <label for="newName">예금주명</label>
            <input id="newName" type="text" placeholder="홍길동" />
            <label for="newPin">초기 PIN</label>
            <input id="newPin" type="password" placeholder="숫자 4~8자리" maxlength="8" />
            <label for="newEmail">이메일</label>
            <input id="newEmail" type="email" placeholder="customer@company.com" />
            <label for="newPostcode">우편번호</label>
            <div class="address-row">
              <div>
                <input id="newPostcode" type="text" placeholder="우편번호" maxlength="10" />
              </div>
              <button id="newAddressSearchBtn" type="button" class="ghost-btn">주소 검색</button>
            </div>
            <label for="newAddress">주소</label>
            <input id="newAddress" type="text" placeholder="주소" />
            <label for="initialBalance">초기 입금</label>
            <input id="initialBalance" type="number" min="0" step="1" placeholder="0" />
            <button id="createAccountBtn" class="btn-primary">계좌 생성</button>
          </article>
          <article class="card">
            <h3>상태 일괄 관리</h3>
            <p>고객 계좌를 클릭하면 액션 패널이 열립니다.</p>
            <div class="status-list">
              <p><strong>선택 계좌:</strong> <span id="selectedAccount">없음</span></p>
              <label for="targetEmail">이메일</label>
              <input id="targetEmail" type="email" placeholder="customer@cityline.co.kr" />
              <label for="targetAmount">조정 금액 (양수/음수)</label>
              <input id="targetAmount" type="number" step="1" placeholder="예: 50000 또는 -20000" />
              <label for="targetMemo">사유</label>
              <input id="targetMemo" type="text" placeholder="예: 수수료 조정, 복구 입금" />
              <div class="button-row">
                <button id="adjustBtn" class="btn-primary" disabled>잔액 조정</button>
                <button id="freezeBtn" class="ghost-btn" disabled>잠금 토글</button>
                <button id="updateEmailBtn" class="ghost-btn" disabled>이메일 수정</button>
              </div>
            </div>
          </article>
        </section>

        <section class="card">
          <h3>승인 대기 이체</h3>
          <div id="adminPendingApprovals" class="ledger"></div>
        </section>
        <section class="card">
          <h3>전체 계좌</h3>
          <div id="accountsTable" class="table-wrap"></div>
        </section>
        <section class="card">
          <h3>감사 로그</h3>
          <div id="adminLedger" class="ledger"></div>
        </section>
      </section>
    </main>
  </div>
 
  <div id="toast" class="toast hidden"></div>
  <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <script src="app.js"></script>
</body>
</html>
